var Colorpicker=function(t){this.canvas=this.createHiDPICanvas(300,200),this.canvasContext=this.canvas.getContext("2d"),this.colorCanvas,this.colorContext,this.parent=t,this.backgroundGradient,this.mousePos={x:100,y:100},this.foregroundColor="cyan",this.colorDiv,this.colorSpan,this.color,this.isDown=!1,this.initialize=function(){this.loadHTML(),this.applyEventListeners(this.canvas),this.applyStyle(this.canvas),t.appendChild(this.canvas),this.createForegroundColor(),this.createBackgroundGradient(),this.createForegroundSelector(),this.colorDiv=document.createElement("div"),this.colorDiv.style.width="100px",this.colorDiv.style.height="100px",this.colorDiv.style.marginLeft="10px",this.colorDiv.style.borderRadius="6px",t.appendChild(this.colorDiv),this.colorSpan=document.createElement("span"),t.appendChild(this.colorSpan)},this.initialize()};Colorpicker.prototype.createBackgroundGradient=function(){null==this.backgroundGradient&&(this.backgroundGradient=this.canvasContext.createLinearGradient(0,0,0,200),this.backgroundGradient.addColorStop(0,"transparent"),this.backgroundGradient.addColorStop(1,"black")),this.canvasContext.fillStyle=this.backgroundGradient,this.canvasContext.fillRect(0,0,300,200)},Colorpicker.prototype.createForegroundColor=function(){var t=this.canvasContext.createLinearGradient(0,0,300,0);t.addColorStop(0,"white"),t.addColorStop(1,this.foregroundColor),this.canvasContext.fillStyle=t,this.canvasContext.fillRect(0,0,300,200)},Colorpicker.prototype.createForegroundSelector=function(){this.colorCanvas=document.createElement("canvas"),this.colorCanvas.width=600,this.colorCanvas.height=10,this.colorContext=this.colorCanvas.getContext("2d"),this.applyStyle(this.colorCanvas);var t=document.createElement("div");t.classList.add("sliderContainer"),t.appendChild(this.colorCanvas),this.parent.appendChild(t),this.drawForegroundSelectorGradient(),this.createSlider(t)},Colorpicker.prototype.applyStyle=function(t){t.style.borderRadius="6px",t.style.display="block",t.style.margin="10px"},Colorpicker.prototype.drawForegroundSelectorGradient=function(){var t=this.colorContext.createLinearGradient(0,0,600,0);t.addColorStop(0,"red"),t.addColorStop(1/6,"yellow"),t.addColorStop(2/6,"lime"),t.addColorStop(.5,"cyan"),t.addColorStop(4/6,"blue"),t.addColorStop(5/6,"magenta"),t.addColorStop(1,"red"),this.colorContext.fillStyle=t,this.colorContext.fillRect(0,0,600,10)},Colorpicker.prototype.createSlider=function(t){var o=document.createElement("input");o.type="range",o.classList.add("slider"),o.min="1",o.max="600",o.value="300";var e=this;o.oninput=function(t){var o=t.target.value,n=e.colorContext.getImageData(o,5,1,1).data;e.foregroundColor=`rgb(${n[0]}, ${n[1]}, ${n[2]})`,e.outputColor()}.bind(e),t.appendChild(o)},Colorpicker.prototype.applyEventListeners=function(){this.canvas.addEventListener("mousedown",function(t){this.isDown=!0}.bind(this),!1),this.canvas.addEventListener("mousemove",function(t){this.isDown&&this.outputColor(this.canvas)}.bind(this),!1),this.canvas.addEventListener("mouseup",function(t){this.isDown=!1}.bind(this),!1)},Colorpicker.prototype.outputColor=function(t){this.createForegroundColor(),this.createBackgroundGradient(),this.mousePos=null==t?this.mousePos:this.getMousePos(t,event),this.createCircles();var o=this.canvasContext.getImageData(this.mousePos.x*this.PIXEL_RATIO,this.mousePos.y*this.PIXEL_RATIO,1,1).data;this.color=function(t,o,e){if(t>255||o>255||e>255)throw"Invalid color component";return(t<<16|o<<8|e).toString(16)}(o[0],o[1],o[2]),this.colorDiv.style.background=`rgb(${o[0]}, ${o[1]}, ${o[2]})`,this.colorSpan.innerHTML=`#${this.color.toUpperCase()}<br>rgb(${o[0]}, ${o[1]}, ${o[2]})`},Colorpicker.prototype.createCircles=function(){this.canvasContext.beginPath(),this.canvasContext.arc(this.mousePos.x,this.mousePos.y,5,0,2*Math.PI),this.canvasContext.lineWidth=3,this.canvasContext.strokeStyle="white",this.canvasContext.stroke(),this.canvasContext.beginPath(),this.canvasContext.arc(this.mousePos.x,this.mousePos.y,8,0,2*Math.PI),this.canvasContext.lineWidth=3,this.canvasContext.strokeStyle="#2e2e2e",this.canvasContext.stroke()},Colorpicker.prototype.loadHTML=function(){var t=document.createElement("style");t.innerHTML="\n        .sliderContainer {\n            position: relative;\n        }\n\n        .slider {\n            width: 600px;\n            margin: 10px;\n            position: absolute;\n            top: -15px;\n            -webkit-appearance: none;\n            background: rgba(0,0,0,0);\n        }\n\n        .slider:focus {\n            outline: 0;\n        }\n\n        .slider::-webkit-slider-thumb {\n            -webkit-appearance: none; /* Override default look */\n            appearance: none;\n            width: 10px;\n            height: 20px;\n            background: rgb(80, 80, 80); /* Green background */\n            border-radius: 3px;\n            cursor: pointer; /* Cursor on hover */\n        }",document.body.appendChild(t)},Colorpicker.prototype.getMousePos=function(t,o){var e=t.getBoundingClientRect();return{x:o.clientX-e.left,y:o.clientY-e.top}},Colorpicker.prototype.PIXEL_RATIO=function(){var t=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}(),Colorpicker.prototype.createHiDPICanvas=function(t,o,e){e||(e=this.PIXEL_RATIO);var n=document.createElement("canvas");return n.width=t*e,n.height=o*e,n.style.width=t+"px",n.style.height=o+"px",n.getContext("2d").setTransform(e,0,0,e,0,0),n};